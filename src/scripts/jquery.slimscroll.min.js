(function(n){jQuery.fn.extend({slimScroll:function(t){var i=n.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},t);return this.each(function(){function b(t){var t,u,f;c&&(t=t||window.event,u=0,t.wheelDelta&&(u=-t.wheelDelta/120),t.detail&&(u=t.detail/3),f=t.target||t.srcTarget||t.srcElement,n(f).closest("."+i.wrapperClass).is(r.parent())&&o(u,!0),t.preventDefault&&!s&&t.preventDefault(),s||(t.returnValue=!1))}function o(n,t,e){var o=n,c=r.outerHeight()-u.outerHeight(),s;t&&(o=parseInt(u.css("top"))+n*parseInt(i.wheelStep)/100*u.outerHeight(),o=Math.min(Math.max(o,0),c),o=n>0?Math.ceil(o):Math.floor(o),u.css({top:o+"px"}));f=parseInt(u.css("top"))/(r.outerHeight()-u.outerHeight());o=f*(r[0].scrollHeight-r.outerHeight());e&&(o=n,s=o/r[0].scrollHeight*r.outerHeight(),s=Math.min(Math.max(s,0),c),u.css({top:s+"px"}));r.scrollTop(o);r.trigger("slimscrolling",~~o);d();h()}function ft(){window.addEventListener?(this.addEventListener("DOMMouseScroll",b,!1),this.addEventListener("mousewheel",b,!1)):document.attachEvent("onmousewheel",b)}function k(){l=Math.max(r.outerHeight()/r[0].scrollHeight*r.outerHeight(),ut);u.css({height:l+"px"});var n=l==r.outerHeight()?"none":"block";u.css({display:n})}function d(){if(k(),clearTimeout(g),f==~~f){if(s=i.allowPageScroll,tt!=f){var n=~~f==0?"top":"bottom";r.trigger("slimscroll",n)}}else s=!1;if(tt=f,l>=r.outerHeight()){s=!0;return}u.stop(!0,!0).fadeIn("fast");i.railVisible&&e.stop(!0,!0).fadeIn("fast")}function h(){i.alwaysVisible||(g=setTimeout(function(){i.disableFadeOut&&c||v||y||(u.fadeOut("slow"),e.fadeOut("slow"))},1e3))}var c,v,y,g,nt,l,f,tt,p="<div><\/div>",ut=30,s=!1,r=n(this),a,w,it;if(r.parent().hasClass(i.wrapperClass)){if(a=r.scrollTop(),u=r.parent().find("."+i.barClass),e=r.parent().find("."+i.railClass),k(),n.isPlainObject(t)){if("height"in t&&t.height=="auto"&&(r.parent().css("height","auto"),r.css("height","auto"),w=r.parent().parent().height(),r.parent().css("height",w),r.css("height",w)),"scrollTo"in t)a=parseInt(i.scrollTo);else if("scrollBy"in t)a+=parseInt(i.scrollBy);else if("destroy"in t){u.remove();e.remove();r.unwrap();return}o(a,!1,!0)}return}i.height=i.height=="auto"?r.parent().height():i.height;it=n(p).addClass(i.wrapperClass).css({position:"relative",overflow:"hidden",width:i.width,height:i.height});r.css({overflow:"hidden",width:i.width,height:i.height});var e=n(p).addClass(i.railClass).css({width:i.size,height:"100%",position:"absolute",top:0,display:i.alwaysVisible&&i.railVisible?"block":"none","border-radius":i.railBorderRadius,background:i.railColor,opacity:i.railOpacity,zIndex:90}),u=n(p).addClass(i.barClass).css({background:i.color,width:i.size,position:"absolute",top:0,opacity:i.opacity,display:i.alwaysVisible?"block":"none","border-radius":i.borderRadius,BorderRadius:i.borderRadius,MozBorderRadius:i.borderRadius,WebkitBorderRadius:i.borderRadius,zIndex:99}),rt=i.position=="right"?{right:i.distance}:{left:i.distance};e.css(rt);u.css(rt);r.wrap(it);r.parent().append(u);r.parent().append(e);i.railDraggable&&n.ui&&typeof n.ui.draggable=="function"&&u.draggable({axis:"y",containment:"parent",start:function(){y=!0},stop:function(){y=!1;h()},drag:function(){o(0,n(this).position().top,!1)}});e.hover(function(){d()},function(){h()});u.hover(function(){v=!0},function(){v=!1});r.hover(function(){c=!0;d();h()},function(){c=!1;h()});r.bind("touchstart",function(n){n.originalEvent.touches.length&&(nt=n.originalEvent.touches[0].pageY)});r.bind("touchmove",function(n){if(n.originalEvent.preventDefault(),n.originalEvent.touches.length){var t=(nt-n.originalEvent.touches[0].pageY)/i.touchScrollStep;o(t,!0)}});i.start==="bottom"?(u.css({top:r.outerHeight()-u.outerHeight()}),o(0,!0)):i.start!=="top"&&(o(n(i.start).position().top,null,!0),i.alwaysVisible||u.hide());ft();k()}),this}});jQuery.fn.extend({slimscroll:jQuery.fn.slimScroll})})(jQuery);