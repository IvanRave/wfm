(function(n,t,i,r,u){var e=function(n,i){var f=this,e;f.templateId=n;f.loaded=!1;f.template=t.observable(r.defaults.useLoadingTemplate?r.defaults.loadingTemplate.content:u);f.template.data={};f.options=t.utils.extend({},i);f.options.templateId=n;f.options&&f.options.afterRender&&(e=f.options.afterRender,i.afterRender=function(){f.loaded&&e.apply(f.options,arguments)})},f;t.utils.extend(e.prototype,{data:function(n,t){if(arguments.length===1)return n==="precompiled"&&this.template(),this.template.data[n];this.template.data[n]=t},text:function(){if(this.loaded||this.getTemplate(),arguments.length===0)return this.template();this.template(arguments[0])},getTemplate:function(){var n=this;r.get(n.options,function(t){n.data("precompiled",null);n.template(t);n.loaded=!0})}});f=function(n){var i=n?new n:new t.nativeTemplateEngine;return i.templates={},i.makeTemplateSource=function(n,r,u){if(typeof n=="string"){var f=document.getElementById(n);return f?new t.templateSources.domElement(f):(i.templates[n]||(i.templates[n]=new e(n,u)),i.templates[n])}if(n.nodeType==1||n.nodeType==8)return new t.templateSources.anonymousTemplate(n)},i.renderTemplate=function(n,t,r){var u=i.makeTemplateSource(n,t,r);return i.renderTemplateSource(u,t,r)},i};t.KoExternalTemplateEngine=f;i.tmpl&&i.tmpl.tag.tmpl.open.toString().indexOf("__")>=0?t.setTemplateEngine(new f(t.jqueryTmplTemplateEngine)):t.setTemplateEngine(new f)})(window,ko,jQuery,infuser);